"use strict";(self.webpackChunkecom=self.webpackChunkecom||[]).push([[5336],{15336:(e,t,l)=>{l.r(t),l.d(t,{default:()=>g});var n=l(11504),s=l.n(n),a=l(27768),r=l(96800),c=l(83284),d=l(64768),i=l(66564),o=l(53300),u=l(85976),p=l(91864),m=l(89340),v=l(85704),x=l(38467);const h=()=>{var e,t,l,a,h,E,g,f,N,y,b,w,A,S,C,O,P,D;const{ConvertCurrency:I}=(0,x.c)(),{orders:R}=(0,r.w1)((e=>e.order)),{seller:_}=(0,r.w1)((e=>e.seller)),B=(0,r.OY)(),[U,k]=(0,n.useState)(""),F=(0,c.i6)(),j=(0,u.U)(),[Y,T]=(0,n.useState)(),[q,z]=(0,n.useState)(),{id:K}=(0,c.W4)();(0,n.useEffect)((()=>{B((0,p.At)(_._id))}),[B]);const[H,L]=(0,n.useState)(),W=R&&(null==R?void 0:R.find((e=>e._id===K)));(0,n.useEffect)((()=>{const e=W&&W.sellerCart.find((e=>e.sellerID===_._id));L(e)}),[W,_._id]),(0,n.useEffect)((()=>{var e;null!=H&&null!==(e=H.shippingOrderDetails)&&void 0!==e&&e.order_id&&(T(null==H?void 0:H.shippingOrderDetails.order_id),z(null==H?void 0:H.shippingOrderDetails.shipment_id))}),[H]);const G=async(e,t)=>{await i.c.put("".concat(v.Yb,"/order/order-refund-success/").concat(K),{status:U,productID:t},{withCredentials:!0}).then((e=>{m.cp.success("Order updated!"),B((0,p.At)(_._id))})).catch((e=>{m.cp.error(e.response.data.message)}))};return s().createElement("div",{className:"py-4 min-h-screen ".concat(j.section)},s().createElement("div",{className:"w-full flex items-center justify-between"},s().createElement("div",{className:"flex items-center"},s().createElement(o.aE2,{size:30,color:"#0156FF"}),s().createElement("h1",{className:"pl-2 text-[20px] mt-4"},"Order Details")),s().createElement(d.cH,{to:"/dashboard-orders"},s().createElement("div",{className:"".concat(j.button," !bg-[#fce1e6] !rounded-[4px] text-[#fff] font-[600] !h-[45px] text-[18px]")},"Order List"))),s().createElement("div",{className:"w-full flex items-center justify-between pt-6"},s().createElement("h5",{className:"text-[#00000084]"},"Order ID: ",s().createElement("span",null,"#",null==W||null===(e=W._id)||void 0===e?void 0:e.slice(0,8))),s().createElement("h5",{className:"text-[#00000084]"},"Placed on: ",s().createElement("span",null,null==W||null===(t=W.createdAt)||void 0===t?void 0:t.slice(0,10)))),s().createElement("br",null),s().createElement("br",null),W&&(null==W?void 0:W.cart.map(((e,t)=>{var l,n,a,r,c,d;return s().createElement("div",{className:"w-full flex items-start mb-5"},s().createElement("img",{src:"".concat(e.showInputs?null===(l=e.selectedColor.image)||void 0===l?void 0:l.url:null===(n=e.selectedColor.mainImage)||void 0===n?void 0:n.url),alt:"",className:"w-[80x] h-[80px]"}),s().createElement("div",{className:"w-full"},s().createElement("h5",{className:"pl-3 text-[20px] fw-medium"},e.name),s().createElement("h5",{className:"pl-3 text-[18px] fw-light"},"SKU : ",e.selectedColor.SKU),s().createElement("h5",{className:"pl-3 text-[18px] text-[#00000091] fw-light"},null==j||null===(a=j.currency)||void 0===a?void 0:a.Symbol," ",I(e.finalPrice)," x ",e.qty),(null==e||null===(r=e.selectedColor)||void 0===r?void 0:r.haveAttributes)&&s().createElement("p",{className:"pl-3 text-[18px] text-[#00000091]"},null===(c=e.colorAttribute)||void 0===c?void 0:c.name," :"," ",null===(d=e.colorAttribute)||void 0===d?void 0:d.value.valName),"Processing refund"===e.status||"Refund Success"===e.status||"Rejected refund"===e.status?s().createElement(s().Fragment,null,s().createElement("select",{value:U,onChange:e=>k(e.target.value),className:"w-[200px] mt-2 border h-[35px] rounded-[5px]"},["Processing refund","Rejected refund","Refund Success"].slice(["Processing refund","Rejected refund","Refund Success"].indexOf(e.status)).map(((e,t)=>s().createElement("option",{value:e,key:t},e)))),"Processing refund"===e.status&&s().createElement("div",{className:"".concat(j.button," mt-5 !bg-[#FCE1E6] !rounded-[4px] text-[#fff] font-[600] !h-[45px] text-[18px]"),onClick:t=>{G(0,e._id)}},"Update Status")):null))}))),s().createElement("div",{className:"border-t w-full text-right flex justify-between"},s().createElement("h5",{className:"pt-3 text-[18px]"},"Shipping: ",s().createElement("strong",null,null==j||null===(l=j.currency)||void 0===l?void 0:l.Symbol," ",I(null==H||null===(a=H.response)||void 0===a||null===(a=a.orders)||void 0===a?void 0:a.rate))),s().createElement("h5",{className:"pt-3 text-[18px]"},"Total Price: ",s().createElement("strong",null,null==j||null===(h=j.currency)||void 0===h?void 0:h.Symbol," ",I((null==H?void 0:H.subTotalPrice)+(null==H||null===(E=H.response)||void 0===E||null===(E=E.orders)||void 0===E?void 0:E.rate)))),s().createElement("h5",{className:"pt-3 text-[18px]"},s().createElement("strong",null,null==W||null===(g=W.paymentInfo)||void 0===g?void 0:g.type))),s().createElement("div",{className:"border-t w-full"},s().createElement("h5",{className:"pt-3 text-[18px]"},"Delivery Info:"),s().createElement("div",{className:"pt-3 text-[18px]"},s().createElement("p",null,"Courier Name: ",s().createElement("strong",null,null==H||null===(f=H.response)||void 0===f||null===(f=f.orders)||void 0===f?void 0:f.courier_name)),s().createElement("p",null,"Estimated Delivery: ",s().createElement("strong",null,null==H||null===(N=H.response)||void 0===N||null===(N=N.orders)||void 0===N?void 0:N.etd)))),s().createElement("br",null),s().createElement("br",null),s().createElement("div",{className:"w-full 800px:flex items-center"},null!=W&&W.shipping_is_billing?s().createElement("div",{className:"w-full 800px:w-[60%]"},s().createElement("h4",{className:"pt-3 text-[20px] font-[600]"},"Shipping Address:"),s().createElement("h4",{className:"pt-3 text-[20px]"},null==W?void 0:W.BillingAddress.billingaddress1),s().createElement("h4",{className:" text-[20px]"},null==W?void 0:W.BillingAddress.billingaddress2),s().createElement("h4",{className:" text-[20px]"},null==W?void 0:W.BillingAddress.newCountry),s().createElement("h4",{className:" text-[20px]"},null==W?void 0:W.BillingAddress.newState),s().createElement("h4",{className:" text-[20px]"},null==W?void 0:W.BillingAddress.newCity," - ",null==W?void 0:W.BillingAddress.billingzipCode),s().createElement("h4",{className:" text-[20px]"},null==W||null===(y=W.BillingAddress)||void 0===y?void 0:y.billinguserphonenumber),s().createElement("h4",{className:" text-[20px]"},null==W||null===(b=W.BillingAddress)||void 0===b?void 0:b.billinguserEmail)):s().createElement("div",{className:"w-full 800px:w-[60%]"},s().createElement("h4",{className:"pt-3 text-[20px] font-[600]"},"Shipping Address:"),s().createElement("h4",{className:"pt-3 text-[20px]"},null==W?void 0:W.shippingAddress.shippingaddress1),s().createElement("h4",{className:" text-[20px]"},null==W?void 0:W.shippingAddress.shippingaddress2),s().createElement("h4",{className:" text-[20px]"},null==W||null===(w=W.shippingAddress)||void 0===w?void 0:w.newCountryshipping),s().createElement("h4",{className:" text-[20px]"},null==W||null===(A=W.shippingAddress)||void 0===A?void 0:A.newStateshipping),s().createElement("h4",{className:" text-[20px]"},null==W||null===(S=W.shippingAddress)||void 0===S?void 0:S.newCityshipping," - ",null==W?void 0:W.BillingAddress.shippingzipCode),s().createElement("h4",{className:" text-[20px]"},null==W||null===(C=W.shippingAddress)||void 0===C?void 0:C.shippinguserphonenumber),s().createElement("h4",{className:" text-[20px]"},null==W||null===(O=W.shippingAddress)||void 0===O?void 0:O.shippinguserEmail)),s().createElement("div",{className:"w-full 800px:w-[40%]"},s().createElement("h4",{className:"pt-3 text-[20px]"},"Payment Info:"),s().createElement("h4",null,"Status:"," ",null!=W&&null!==(P=W.paymentInfo)&&void 0!==P&&P.status?null==W||null===(D=W.paymentInfo)||void 0===D?void 0:D.status:"Not Paid"))),s().createElement("br",null),s().createElement("br",null),Y&&s().createElement("div",null,s().createElement("h5",null,"Shipment Order Created"),s().createElement("p",null,"ID : ",s().createElement("span",null,Y)),s().createElement("p",null,"Shipment ID : ",s().createElement("span",null,q))),s().createElement("h4",{className:"pt-3 text-[20px] font-[600]"},"Order Status:"),"Processing refund"!==(null==W?void 0:W.status)&&"Refund Success"!==(null==W?void 0:W.status)&&s().createElement("select",{value:U,onChange:e=>k(e.target.value),className:"w-[200px] mt-2 border h-[35px] rounded-[5px]"},["Processing","Transferred to delivery partner","Shipping","Received","On the way","Delivered"].slice(["Processing","Transferred to delivery partner","Shipping","Received","On the way","Delivered"].indexOf(null==W?void 0:W.status)).map(((e,t)=>s().createElement("option",{value:e,key:t},e)))),s().createElement("div",{className:"".concat(j.button," mt-5 !bg-[#FCE1E6] !rounded-[4px] text-[#fff] font-[600] !h-[45px] text-[18px]"),onClick:"Processing refund"!==(null==W?void 0:W.status)?async e=>{await i.c.put("".concat(v.Yb,"/order/update-order-status/").concat(K),{status:U},{withCredentials:!0}).then((e=>{m.cp.success("Order updated!"),F("/shop/dashboard-orders")})).catch((e=>{m.cp.error(e.response.data.message)}))}:G},"Update Status"))};var E=l(93736);const g=()=>s().createElement("div",null,s().createElement(a.c,null),s().createElement(h,null),s().createElement(E.c,null))},38467:(e,t,l)=>{l.d(t,{c:()=>s});var n=l(85976);const s=()=>{const e=(0,n.U)(),t=null==e?void 0:e.currency;return{ConvertCurrency:e=>"INR"!==(null==t?void 0:t.code)?(e*(null==t?void 0:t.exchangeRate)).toFixed(2):e}}},91864:(e,t,l)=>{l.d(t,{At:()=>r,Ym:()=>a});var n=l(66564),s=l(85704);const a=e=>async t=>{try{t({type:"getAllOrdersUserRequest"});const{data:l}=await n.c.get("".concat(s.Yb,"/order/get-all-orders/").concat(e));t({type:"getAllOrdersUserSuccess",payload:l.orders})}catch(e){t({type:"getAllOrdersUserFailed",payload:e.response.data.message})}},r=e=>async t=>{try{t({type:"getAllOrdersShopRequest"});const{data:l}=await n.c.get("".concat(s.Yb,"/order/get-seller-all-orders/").concat(e));t({type:"getAllOrdersShopSuccess",payload:l.orders})}catch(e){t({type:"getAllOrdersShopFailed",payload:e.response.data.message})}}}}]);