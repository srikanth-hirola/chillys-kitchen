"use strict";(self.webpackChunkecom=self.webpackChunkecom||[]).push([[4932],{24932:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var l=a(11504),n=a.n(l),r=a(27768),c=a(53740),s=a(96800),o=a(89340),d=a(66564),m=a(49816),u=a(77980),i=a(85704),p=a(99200);const g=e=>{let{CurrencyArr:t,logoLoading:a,setLogoLoading:l,setCurrencyArr:r}=e;const{saveLayoutContent:c}=(0,p.c)();return n().createElement("div",null,n().createElement("div",{className:"flex justify-between"},n().createElement("p",{className:"font-semibold"},"Currency & Exchange Rates in INR")),(null==t?void 0:t.length)>0?n().createElement(n().Fragment,null,n().createElement("div",{className:"flex gap-10 flex-wrap"},null==t?void 0:t.map(((e,a)=>n().createElement(n().Fragment,{key:a},"INR"!==(null==e?void 0:e.code)&&n().createElement("div",null,n().createElement("label",null,null==e?void 0:e.code,n().createElement("span",{className:"text-red-500"},"*")),n().createElement("br",null),n().createElement("input",{required:!0,placeholder:"Enter Exchange Rate in INR",className:"border-1 rounded px-2 py-2 mt-2",value:null==e?void 0:e.exchangeRate,type:"number",name:"exchangeRate",onChange:e=>((e,a)=>{const{name:l,value:n}=e.target;let c=JSON.parse(JSON.stringify(t));c[a][l]=n,r(c)})(e,a)})))))),a?n().createElement("button",{className:"w-[150px] h-[40px] rounded bg-green-500 text-white my-3"},"Loading..."):n().createElement("button",{className:"w-[150px] h-[40px] rounded bg-green-500 text-white my-3",onClick:e=>{e.preventDefault(),(e=>{let t=!1;return Promise.all(e.map((e=>{"INR"!==(null==e?void 0:e.code)&&(null!=e&&e.exchangeRate||(t=!0))}))),t})(t)?o.cp.error("All Currency Exchange Rates are required!"):c(t,"CurrencyArr",l)}},"Update Currency")):n().createElement("p",null,"No Currency Types Exist"))},E=()=>{const[e,t]=(0,l.useState)(!1),{success:a,error:r,siteConfigData:c}=(0,s.w1)((e=>e.siteConfig)),[p,E]=(0,l.useState)(),[y,h]=(0,l.useState)({}),[x,N]=(0,l.useState)([]),[f,v]=(0,l.useState)({INR:[],USD:[],EUR:[]}),b=(0,s.OY)();(0,l.useEffect)((()=>{a&&o.cp.success("Site Configuration Updated Successfully"),r&&o.cp.error(r.response.data.message),b((0,m.WS)()),b((0,u.Y)())}),[a,r,b]),(0,l.useEffect)((()=>{E(null==c?void 0:c.logo),h(null==c?void 0:c.currency),v(null==c?void 0:c.paymentMethods),N(null==c?void 0:c.CurrencyArr)}),[c]);const w=["RazorPay","Stripe","COD"],S=["PayPal","Stripe","COD"],R=["PayPal","Stripe","COD"];return n().createElement("div",{className:"w-full min-h-[45vh] pt-5 rounded flex justify-center outer1-div"},n().createElement("div",{className:"w-[97%] flex justify-center border-1 rounded h-fit dashboard-miscellanenous-page-data"},n().createElement("div",{className:"w-full px-8 py-4 dashboard-logo-config-start-here"},n().createElement("div",{className:"mb-3 flex space-x-3 mt-12"},n().createElement("div",{className:"border-1 rounded w-6/12 py-3 px-4"},n().createElement("label",{className:"w-[255px] pb-3"},"Logo",n().createElement("span",{className:"text-red-500"},"*")),n().createElement("br",null),n().createElement("input",{type:"file",onChange:e=>{((e,t)=>{const a=e.target.files[0];if(a){const e=new FileReader;e.onloadend=()=>{const t=e.result;E(t)},e.readAsDataURL(a)}})(e)},accept:"image/*"}),p&&n().createElement(n().Fragment,null,n().createElement("div",{className:"w-[122px] my-3 border-1 rounded"},n().createElement("img",{src:null!=p&&p.url?null==p?void 0:p.url:p,alt:"logo",className:"w-full"})),n().createElement("br",null),e?n().createElement("button",{className:"w-[150px] h-[40px] rounded bg-green-500 text-white"},"Loading..."):n().createElement("button",{className:"w-[150px] h-[40px] rounded bg-green-500 text-white",onClick:e=>{(async(e,a)=>{e.preventDefault(),null!=p&&p.url?o.cp.error("No Image File is Uploaded"):(async(e,a)=>{try{t(!0),await d.c.post("".concat(i.Yb,"/site/site-config-logo"),{image:e,name:a}),o.cp.success("Uploaded Image Successfully"),t(!1),b((0,m.WS)())}catch(e){t(!1),o.cp.error(e.response.data.message)}})(p,a)})(e,"logo")}},"Upload Logo")))),n().createElement("div",{className:"border-1 rounded py-3 px-4"},n().createElement("div",{className:"my-6  "},n().createElement("label",null,"Currency Type",n().createElement("span",{className:"text-red-500"},"*")),n().createElement("br",null),n().createElement("select",{className:"border-1 rounded w-[150px] px-2 py-1 mt-3",onChange:e=>{const t=e.target.value;if(h(x[t]),"INR"===x[t].code){let e=w.filter((e=>null==f?void 0:f.INR.includes(e)));v({...f,INR:e})}else if("USD"===x[t].code){let e=S.filter((e=>null==f?void 0:f.USD.includes(e)));v({...f,USD:e})}else{let e=null==R?void 0:R.filter((e=>null==f?void 0:f.EUR.includes(e)));v({...f,EUR:e})}}},x.map(((e,t)=>n().createElement("option",{key:t,value:t,selected:y.code===e.code},e.code))))),n().createElement("div",{className:"my-12  dashboard-accepting-page"},n().createElement("label",null,"Accepted Payment Methods",n().createElement("span",{className:"text-red-500"},"*")),n().createElement("br",null),n().createElement("div",{className:"flex my-10 dashboard-payment-inr"},"INR"===y.code&&(null==w?void 0:w.map(((e,t)=>n().createElement("div",{key:t,className:"flex items-center"},n().createElement("input",{type:"checkbox",className:"w-[15px] h-[15px]",onChange:t=>((e,t)=>{let a=JSON.parse(JSON.stringify(f));e.target.checked?a.INR.push(t):a.INR=a.INR.filter((e=>e!==t)),v(a)})(t,e),checked:!(null==f||!f.INR.includes(e))}),n().createElement("label",{className:"mx-2"},e))))),"USD"===y.code&&(null==S?void 0:S.map(((e,t)=>n().createElement("div",{key:t,className:"flex items-center"},n().createElement("input",{type:"checkbox",className:"w-[15px] h-[15px]",onChange:t=>((e,t)=>{let a=JSON.parse(JSON.stringify(f));e.target.checked?a.USD.push(t):a.USD=a.USD.filter((e=>e!==t)),v(a)})(t,e),checked:!(null==f||!f.USD.includes(e))}),n().createElement("label",{className:"mx-2"},e))))),"EUR"===y.code&&(null==R?void 0:R.map(((e,t)=>{var a;return n().createElement("div",{key:t,className:"flex items-center"},n().createElement("input",{type:"checkbox",className:"w-[15px] h-[15px]",onChange:t=>((e,t)=>{let a=JSON.parse(JSON.stringify(f));e.target.checked?null==a||a.EUR.push(t):a.EUR=null==a?void 0:a.EUR.filter((e=>e!==t)),v(a)})(t,e),checked:!(null==f||null===(a=f.EUR)||void 0===a||!a.includes(e))}),n().createElement("label",{className:"mx-2"},e))})))),e?n().createElement("button",{className:"w-[400px] h-[40px] rounded bg-green-500 text-white"},"Loading..."):n().createElement("button",{className:"w-[400px] h-[40px] rounded bg-green-500 text-white payment-update-button",onClick:async e=>{if(e.preventDefault(),"INR"===y.code){if(0===f.INR.length)return void o.cp.error("At least One Payment Method should be given")}else if("USD"===y.code){if(0===f.USD.length)return void o.cp.error("At least One Payment Method should be given")}else if(0===f.EUR.length)return void o.cp.error("At least One Payment Method should be given");try{t(!0),await d.c.put("".concat(i.Yb,"/site/site-config-currency"),{currency:y,paymentMethods:f}),o.cp.success("Updated Currency & Payment methods Successfully"),t(!1),b((0,m.WS)())}catch(e){t(!1),o.cp.error(e.response.data.message)}}},"Update Currency & Payment Config"))),n().createElement("div",{className:"border-1 rounded py-3 px-4 my-3 dashboard-currency-design"},n().createElement(g,{CurrencyArr:x,logoLoading:e,setCurrencyArr:N,setLogoLoading:t})))))};var y=a(93736);const h=()=>n().createElement("div",null,n().createElement(r.c,null),n().createElement("div",{className:"flex items-start justify-between w-full dasboard-user-width-mobile"},n().createElement("div",{className:"800px:w-[330px] dashboard-side-bar-res"},n().createElement(c.c,{active:27})),n().createElement("div",{className:"w-full justify-center flex dashboard-side-bar-data-view"},n().createElement(E,{active:27}))),n().createElement(y.c,null))}}]);