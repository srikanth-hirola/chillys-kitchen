"use strict";(self.webpackChunkecom=self.webpackChunkecom||[]).push([[5296],{45296:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var l=a(11504),c=a.n(l),n=a(27768),r=a(93736),o=a(53740),s=a(84776),d=a(46568),i=a(15e3),u=a(2728),m=a(58496),g=a(78540),p=a(40232),v=a(58130),y=a(66564),h=a(64768),f=a(19120),w=a(26460),E=a(89340),b=a(83284),C=a(85704);const S=e=>{let{id:t,setLoading:a,endpoint:l,message:n}=e;const{deleteData:r}=(()=>{const e=(0,b.i6)(),t="".concat(C.Yb,"/blogs/"),a=async(e,a,l,c)=>{try{var n;await y.c.delete("".concat(t,"admin/delete-Img/").concat(e,"/").concat(a),{withCredentials:!0});let r={...l},o=[...r.large_thumb];o=null===(n=o)||void 0===n?void 0:n.filter((t=>(null==t?void 0:t.public_id)!==e)),r.large_thumb=o,c(r),E.cp.success("Image delete successfully!")}catch(e){var r;E.cp.error(null==e||null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.message)}};return{deleteData:async(e,a,l,c)=>{e.preventDefault();try{a(!0),await y.c.delete("".concat(t).concat(l),{withCredentials:!0}),window.location.reload(),E.cp.success(c),a(!1)}catch(e){var n;E.cp.error(null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message),a(!1)}},updateData:async(a,l,c,n,r,o)=>{a.preventDefault(),c(!0);try{await y.c.put("".concat(t).concat(n),{data:l},{withCredentials:!0}),e(r),E.cp.success(o),c(!1)}catch(a){var s;E.cp.error(null==a||null===(s=a.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.message),c(!1)}},handleCloudinaryImageDelete:a,handleImageDeleteCloude:(e,t,l)=>{e.preventDefault(),window.confirm("uploaded Image will be deleted Permanently!")&&a(t,l)},handleAddCategory:async(e,a,l,c,n,r)=>{e.preventDefault();try{await y.c.post("".concat(t).concat(n),{[r]:c},{withCredentials:!0});let e=[...a];e.push({[r]:c}),l(e),E.cp.success("Added Category successfully")}catch(e){var o;E.cp.error(null==e||null===(o=e.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.message)}},fetchCategories:async(e,a)=>{try{const{data:l}=await y.c.get("".concat(t).concat(a));e(null==l?void 0:l.categories)}catch(e){var l;E.cp.error(null==e||null===(l=e.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)}},handleSubmit:async(a,l,c,n,r)=>{a.preventDefault();try{await y.c.post("".concat(t).concat(c),{data:l}),e(n),E.cp.success(r)}catch(a){var o;E.cp.error(null==a||null===(o=a.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.message)}},fetchSingleData:async(e,a,l,c)=>{try{await y.c.get("".concat(t).concat(e)).then((e=>{var t;a(!0),""===e.data?(a(!0),l("Notfound")):c({...null==e||null===(t=e.data)||void 0===t?void 0:t.data})})).catch((e=>{console.log(e)}))}catch(e){console.log(e)}},fetchBunchData:async(e,a,l,c)=>{try{const n=await y.c.get("".concat(t).concat(e));a(!0);const r=n.data;r.length>0?l(r):c("Notfound")}catch(e){console.log(e)}}}})();return c().createElement(c().Fragment,null,c().createElement(w.c,{type:"button",variant:"outline-danger",onClick:e=>r(e,a,l,n)},"Delete"))},x=()=>{const[e,t]=(0,l.useState)([]),[a,n]=(0,l.useState)(""),[r,o]=(0,l.useState)(!1),[w,E]=(0,l.useState)(""),b=(0,l.useRef)(null),{Search:x}=d.default,{Text:D}=i.default,[_,I]=(0,l.useState)(1),[k,N]=(0,l.useState)(10),[F,L]=(0,l.useState)(0);function z(e){const t=new Date(e),a=t.getDate(),l=t.getFullYear(),c=t.toLocaleString("default",{month:"short"});return"".concat(a," ").concat(c,"Â ").concat(l)}const A=[{title:"Index",dataIndex:"rowNumber",key:"rowNumber",render:(e,t,a)=>c().createElement("span",null,F-(_-1)*k-a)},{title:"Title",dataIndex:"title",key:"title",...B("title","Title"),render:(e,t)=>c().createElement(h.cH,{to:"/admin/blog/".concat(t.slug)},e)},{title:"Slug",dataIndex:"slug",key:"slug",...B("slug","Slug")},{title:"Category",dataIndex:"category",key:"category",...B("category","Category")},{title:"Post Date",dataIndex:"post_date",key:"post_date",...B("post_date","Post Date"),render:(e,t)=>c().createElement("span",null,t.post_date?t.post_date:z(t.createdAt))},{title:"Action",key:"action",render:(e,t)=>c().createElement(u.c,{size:"middle"},c().createElement(f.c,{path:"/admin/blog/edit/".concat(t._id)}),c().createElement(S,{id:t._id,setLoading:o,endpoint:"blog/delete/".concat(t._id),message:"Deleted Blog Successfully"}))}];function B(e,t){return{filterDropdown:a=>{let{setSelectedKeys:l,selectedKeys:n,confirm:r,clearFilters:o}=a;return c().createElement("div",{style:{padding:8}},c().createElement(x,{placeholder:"Search ".concat(t),value:n[0],onChange:e=>l(e.target.value?[e.target.value]:[]),onSearch:()=>T(n,r,e),enterButton:!0,ref:e=>{b.current=e}}),c().createElement(u.c,null,c().createElement("button",{onClick:()=>P(o),style:{width:90}},"Reset")))},filterIcon:e=>c().createElement(g.c,{style:{color:e?"#1890ff":void 0}}),onFilter:(t,a)=>{const l=a[e]?a[e].toString():"",c=a.createdAt?z(a.createdAt).toString():"";return l.toLowerCase().includes(t.toLowerCase())||c.toLowerCase().includes(t.toLowerCase())},onFilterDropdownOpenChange:e=>{e&&setTimeout((()=>{var e;return null===(e=b.current)||void 0===e?void 0:e.select()}))},render:e=>w?c().createElement(D,{type:"success"},e):e}}const T=(e,t,a)=>{t(),E(e[0])},P=e=>{e(),E("")};return(0,l.useEffect)((()=>{(async e=>{try{const a=await y.c.get(e);o(!0);const l=a.data;l.length>0?(t(l),L(l.length)):n("Notfound")}catch(e){console.log(e)}})("".concat(C.Yb,"/blogs/blogs-list"))}),[]),c().createElement(c().Fragment,null,c().createElement("div",{class:"custom-cursor__cursor",style:{transform:"translate3d(calc(492px - 50%), calc(172px - 50%), 0px)"}}),c().createElement("div",{class:"custom-cursor__cursor-two",style:{left:"591px",top:"181px"}}),r?c().createElement(s.c,null,c().createElement("div",null,c().createElement("h3",null,"Blogs"),"Notfound"===a?c().createElement("p",null,"No Blogs are available"):c().createElement(m.c,{dataSource:e,columns:A,resizeable:!0,onChange:e=>{I(e.current),N(e.pageSize)},pagination:{current:_,pageSize:k}}))):c().createElement(p.c,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:!0},c().createElement(v.c,{color:"inherit"})))},D=()=>c().createElement("div",null,c().createElement(n.c,{active:0}),c().createElement("div",{className:"flex justify-between w-full"},c().createElement("div",{className:"w-[80px] 800px:w-[330px] dashboard-side-bar-res"},c().createElement(o.c,{active:50})),c().createElement("div",{className:"w-full justify-center flex dashboard-side-bar-data-view"},c().createElement(x,null))),c().createElement(r.c,null))},19120:(e,t,a)=>{a.d(t,{c:()=>o});var l=a(11504),c=a.n(l),n=a(64768),r=a(26460);const o=e=>{let{path:t}=e;return c().createElement(c().Fragment,null,c().createElement(n.cH,{to:t},c().createElement(r.c,{type:"button",variant:"outline-primary"},"Edit")))}}}]);