"use strict";(self.webpackChunkecom=self.webpackChunkecom||[]).push([[7352],{37352:(e,t,l)=>{l.r(t),l.d(t,{default:()=>E});var a=l(11504),r=l.n(a),n=l(27768),c=l(53740),o=l(93736),s=l(83284),i=l(94064),m=l(26460),u=l(42760),d=l(45584),p=l(66564),g=l(89340),b=l(85704);const v=()=>{const[e,t]=(0,a.useState)(!1),[l,n]=(0,a.useState)({title:"",metaTitle:"",metaDescription:"",blogDescription:"",read_time:"",category:"",excerpt:"",large_thumb:[],body:"",slug:""}),c=(0,s.i6)();return r().createElement(r().Fragment,null,r().createElement(u.c,null,r().createElement("div",null,r().createElement("div",{className:"col-md-12 sticky-top"},r().createElement("h1",{className:"compose-blog-title"},"Compose New Blog"),r().createElement(m.c,{variant:"outline-primary",className:"update_button sticky-top",type:"submit",name:"sub",onClick:async e=>{e.preventDefault();try{t(!0),await p.c.post("".concat(b.Yb,"/blogs/compose"),{blogData:l},{withCredentials:!0}),c("/dashboard"),g.cp.success("Published Blog Successfully!")}catch(e){var a;g.cp.error(null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.message)}finally{t(!1)}},disabled:!!e},e?"Loading...":"Publish")),r().createElement(i.c,null,r().createElement(d.m,{blogData:l,setBlogData:n})))))},E=()=>r().createElement("div",null,r().createElement(n.c,{active:0}),r().createElement("div",{className:"flex justify-between w-full"},r().createElement("div",{className:"w-[80px] 800px:w-[330px] dashboard-side-bar-res"},r().createElement(c.c,{active:49})),r().createElement("div",{className:"w-full justify-center flex dashboard-side-bar-data-view"},r().createElement(v,null))),r().createElement(o.c,null))},45584:(e,t,l)=>{l.d(t,{m:()=>b});var a=l(11504),r=l.n(a),n=l(94064),c=l(43192),o=l.n(c),s=l(88096),i=l(26460),m=l(66564),u=l(76542),d=l(15896),p=l(89340),g=l(85704);const b=e=>{var t;let{blogData:l,setBlogData:c,_id:b}=e;const[v,E]=(0,a.useState)(""),[y,f]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await m.c.get("".concat(g.Yb,"/blogs/category"));f(null==e?void 0:e.categories)}catch(e){console.log(e)}})()}),[]);const h=(0,a.useRef)(null),w=(0,a.useMemo)((()=>({readonly:!1,enableDragAndDropFileToEditor:!0,uploader:{insertImageAsBase64URI:!0},controls:{font:{list:{"Roboto Medium,Arial,sans-serif":"Roboto"}}}})),[]),C=e=>{const{value:t,name:a}=e.target;let r=JSON.parse(JSON.stringify(l));r[a]=t,c(r)};return r().createElement("div",{className:"form-group"},r().createElement(p.ox,{position:"top-right",reverseOrder:!1,toastOptions:{duration:3e3,style:{position:"relative",top:"80px"}}}),r().createElement(n.c.Group,{className:"mb-3",controlId:"formBasicPassword"},r().createElement(n.c.Label,null,"Blog Title"),r().createElement(n.c.Control,{name:"title",value:l.title,onChange:C,type:"text",placeholder:"Blog Title",required:!0})),r().createElement("br",null),r().createElement(n.c.Group,{className:"mb-3",controlId:"formBasicPassword"},r().createElement(n.c.Label,null,"URL slug"),r().createElement(n.c.Control,{name:"slug",value:l.slug,onChange:C,type:"text",placeholder:"URL slug",required:!0}),r().createElement(i.c,{variant:"outline-primary",className:"update_button mt-3",type:"submit",name:"sub",onClick:e=>{if(e.preventDefault(),null==l||!l.title)return void alert("Title is required!");const t=(0,s.c)(null==l?void 0:l.title);c({...l,slug:t})}},"Generate")),r().createElement("br",null),r().createElement(n.c.Group,{className:"mb-3",controlId:"formBasicPassword"},r().createElement(n.c.Label,null,"Meta Title"),r().createElement(n.c.Control,{name:"metaTitle",value:l.metaTitle,onChange:C,type:"text",placeholder:"Meta Title",required:!0})),r().createElement("br",null),r().createElement(n.c.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1"},r().createElement(n.c.Label,null,"Meta Description"),r().createElement(n.c.Control,{placeholder:"Meta Description",as:"textarea",rows:5,name:"metaDescription",value:l.metaDescription,onChange:C,required:!0})),r().createElement(n.c.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1"},r().createElement(n.c.Label,null,"Post Description"),r().createElement(n.c.Control,{placeholder:"Post Description",as:"textarea",rows:5,name:"blogDescription",value:l.blogDescription,onChange:C,required:!0})),r().createElement("br",null),r().createElement(n.c.Group,{className:"mb-3",controlId:"formBasicPassword"},r().createElement(n.c.Label,null,"Read Time"),r().createElement(n.c.Control,{name:"read_time",value:l.read_time,onChange:C,type:"text",placeholder:"Read Time",required:!0})),r().createElement("br",null),r().createElement(n.c.Group,{className:"mb-3",controlId:"formBasicPassword"},r().createElement(n.c.Label,null,"Category"),r().createElement("div",{className:"row"},r().createElement("div",{className:"col-6"},r().createElement("select",{value:null==l?void 0:l.category,className:"category-select-dropDown",name:"category",onChange:C},r().createElement("option",{value:"",disabled:!0},"Select a Category"),null==y?void 0:y.map(((e,t)=>r().createElement("option",{key:t,value:null==e?void 0:e.category},null==e?void 0:e.category))))),r().createElement("div",{className:"col-6 d-flex justify-between gap-2"},r().createElement(n.c.Control,{name:"category",value:v,onChange:e=>E(e.target.value),type:"text",placeholder:"Add new Category",required:!0}),r().createElement("button",{variant:"outline-primary",className:"update_button btn btn-sm btn-primary",onClick:async e=>{e.preventDefault();try{await m.c.post("".concat(g.Yb,"/blogs/category"),{category:v},{withCredentials:!0});let e=[...y];e.push({category:v}),f(e),p.cp.success("Added Category successfully")}catch(e){var t;p.cp.error(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.message)}}},"ADD")))),r().createElement("br",null),r().createElement(n.c.Group,{className:"mb-3",controlId:"formBasicPassword"},r().createElement(n.c.Label,null,"Excerpt"),r().createElement(n.c.Control,{name:"excerpt",value:l.excerpt,onChange:C,type:"text",placeholder:"Excerpt",required:!0})),r().createElement("br",null),r().createElement(n.c.Group,{controlId:"formFile",className:"mb-3"},r().createElement(n.c.Label,null,"Upload Image"),r().createElement(n.c.Control,{type:"file",size:"lg",name:"image",accept:".png, .jpg, .jpeg",onChange:e=>{const t=e.target.files,a=[],r=(e,r)=>{if(e.size<=512e4){const n=new FileReader;n.onload=()=>{const e=n.result;if(a[r]=e,a.filter(Boolean).length===t.length){let e=[...null==l?void 0:l.large_thumb].concat(a);c({...l,large_thumb:e})}},n.readAsDataURL(e)}else p.cp.error('File "'.concat(e.name,'" exceeds the size limit of 200 KB.'))};for(let e=0;e<t.length;e++)r(t[e],e)},multiple:!0}),r().createElement("div",{className:"blog-post-image-formInput-parent flex flex-wrap gap-3 my-3"},(null==l?void 0:l.large_thumb.length)>0&&(null==l||null===(t=l.large_thumb)||void 0===t?void 0:t.map(((e,t)=>r().createElement("div",{className:"blog-img-flex relative",key:t},r().createElement("div",{className:"blog-post-image-formInput w-[100px] h-[60px] border-1 rounded"},r().createElement("img",{src:null!=e&&e.public_id?null==e?void 0:e.url:e,alt:"blog-post",className:"w-full h-full object-cover"})),r().createElement("button",{className:"delete-btn absolute top-0 bg-red-200 rounded-br p-1",onClick:a=>{null!=e&&e.public_id?((e,t)=>{e.preventDefault(),window.confirm("uploaded Image will be deleted Permanently!")&&(async(e,t)=>{try{var a;await m.c.delete("".concat(g.Yb,"/blogs/delete-Img/").concat(e,"/").concat(t),{withCredentials:!0});let r={...l},n=[...r.large_thumb];n=null===(a=n)||void 0===a?void 0:a.filter((t=>(null==t?void 0:t.public_id)!==e)),r.large_thumb=n,c(r),p.cp.success("Image delete successfully!")}catch(e){var r;p.cp.error(null==e||null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.message)}})(t,b)})(a,null==e?void 0:e.public_id):((e,t)=>{e.preventDefault();let a={...l},r=[...a.large_thumb];r.splice(t,1),a.large_thumb=r,c(a)})(a,t)}},r().createElement(u.u,{icon:d._8k,style:{color:"#e10909",fontSize:"15px"}})))))))),r().createElement("br",null),r().createElement(n.c.Group,{className:"mb-3",controlId:"formBasicPassword"},r().createElement(n.c.Label,null,"Page Content"),r().createElement(o(),{ref:h,value:l.body,config:w,onBlur:e=>{c({...l,body:e})}})))}}}]);