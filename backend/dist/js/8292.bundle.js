"use strict";(self.webpackChunkecom=self.webpackChunkecom||[]).push([[8292],{8292:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var l=a(11504),r=a.n(l),n=a(27768),c=a(53740),s=a(96800),o=a(83284),u=a(66564),i=a(44484),m=a(85976),d=a(89340),p=a(85704),v=a(60580),E=a(36684);const b=()=>{const{seller:e}=(0,s.w1)((e=>e.seller)),{success:t,error:a}=(0,s.w1)((e=>e.events)),n=(0,o.i6)(),c=(0,s.OY)(),{id:b}=(0,o.W4)(),g=(0,m.U)(),[h,f]=(0,l.useState)([]),[y,x]=(0,l.useState)(""),[N,S]=(0,l.useState)(""),[k,w]=(0,l.useState)(null),[P,A]=(0,l.useState)(null),[D,C]=(0,l.useState)([]);(0,l.useEffect)((()=>{a&&d.cp.error(a),t&&(d.cp.success("Event created successfully!"),setTimeout((()=>{n("/dashboard-events")}),2e3)),u.c.get("".concat(p.Yb,"/event/get-all-cat-product/").concat(e._id)).then((async e=>{q(e.data.product);try{const{data:e}=await u.c.get("".concat(p.Yb,"/event/get-all-event-products-store/").concat(b)),t=null==e?void 0:e.events[0];f(null==t?void 0:t.images),x(null==t?void 0:t.name),S(null==t?void 0:t.description);const a=new Date(null==t?void 0:t.start_Date),l=(null==t?void 0:t.Finish_Date)&&new Date(null==t?void 0:t.Finish_Date);w(a),A(l),z(null==t?void 0:t.productArray),_(!1)}catch(e){console.log(e,"Hi"),d.cp.error(e.response.data.message)}})).catch((e=>{console.log(e)}))}),[c,a,b,n,e._id,t]);const I=(new Date).toISOString().slice(0,10),O=k?new Date((null==k?void 0:k.getTime())+864e5).toISOString().slice(0,10):"",[F,_]=(0,l.useState)(!0),[j,q]=(0,l.useState)(null),[M,Y]=(0,l.useState)(!1),[U,z]=(0,l.useState)([]);return r().createElement(r().Fragment,null,F?r().createElement(v.c,null):r().createElement("div",{className:"w-[90%] 800px:w-[50%] bg-white  shadow h-[100vh] rounded-[4px] p-3 overflow-y-scroll create-width pb-4"},r().createElement("h5",{className:"text-[30px] font-Poppins text-center"},"Edit Event"),r().createElement("form",{onSubmit:async t=>{t.preventDefault();const a=new FormData;if(h.forEach((e=>{a.append("images",e)})),""===y||""===N||0===h.length||null===k||null===P)return void d.cp.error("All Fileds are required");if(0===U.length)return void d.cp.error("Atleast One Product is required to create event");if(!await(async(e,t)=>{let a=[];await e.forEach(((e,t)=>{var l,r;null!=e&&e.showInputs?null==e||null===(l=e.colorInputs)||void 0===l||l.forEach((e=>{var l;null!=e&&e.eventPrice||a.push(t),null!=e&&e.attributeStock?null==e||null===(l=e.attributes[0])||void 0===l||l.values.forEach((e=>{null!=e&&e.eventStock||a.push(t)})):null!=e&&e.eventStock||a.push(t)})):null!=e&&e.attributeStock?null==e||null===(r=e.attributes[0])||void 0===r||r.values.forEach((e=>{null!=e&&e.eventStock||a.push(t)})):null!=e&&e.eventStock||a.push(t)}));const l=new Set(a),r=Array.from(l);return r.length>0?(t(r),!1):(t([]),!0)})(U,C))return void d.cp.error("All fields are required in products");const l={draft:!1,name:y,description:N,productArray:U,images:h,shopId:e._id,start_Date:null==k?void 0:k.toISOString(),Finish_Date:null==P?void 0:P.toISOString()};try{await u.c.post("".concat(p.Yb,"/event/save-draft-event"),{data:l,id:b}),d.cp.success("Event Published Successfully")}catch(e){d.cp.error(e.response.data.message)}}},r().createElement("br",null),r().createElement("div",null,r().createElement("label",{className:"pb-2"},"Event Name ",r().createElement("span",{className:"text-red-500"},"*")),r().createElement("input",{type:"text",name:"name",value:y,className:"mt-2 appearance-none block w-full px-3 h-[35px] border border-gray-300 rounded-[3px] placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:e=>x(e.target.value),placeholder:"Enter your event product name..."})),r().createElement("br",null),r().createElement("div",null,r().createElement("label",{className:"pb-2"},"Description ",r().createElement("span",{className:"text-red-500"},"*")),r().createElement("textarea",{cols:"30",required:!0,rows:"8",type:"text",name:"description",value:N,className:"mt-2 appearance-none block w-full pt-2 px-3 border border-gray-300 rounded-[3px] placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:e=>S(e.target.value),placeholder:"Enter your event product description..."})),r().createElement("br",null),r().createElement("div",null,r().createElement("label",{className:"pb-2"},"Product ",r().createElement("span",{className:"text-red-500"},"*")),r().createElement("br",null),r().createElement(r().Fragment,null,r().createElement("button",{className:" rounded py-2 px-3",onClick:e=>{e.preventDefault(),Y(!M)},style:{backgroundColor:null==g?void 0:g.mainColor,color:null==g?void 0:g.fontColor}},"Select Products"))),r().createElement("br",null),r().createElement("div",null,r().createElement("label",{className:"pb-2"},"Event Start Date ",r().createElement("span",{className:"text-red-500"},"*")),r().createElement("input",{type:"date",name:"price",id:"start-date",value:k?k.toISOString().slice(0,10):"",className:"mt-2 appearance-none block w-full px-3 h-[35px] border border-gray-300 rounded-[3px] placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:e=>{const t=e.target.value,a=t?new Date(t):null,l=a?new Date(a.getTime()+0):null;w(a),A(null);const r=document.getElementById("end-date");r&&l&&(r.min=l.toISOString().slice(0,10))},min:I,placeholder:"Enter your event product stock..."})),r().createElement("br",null),r().createElement("div",null,r().createElement("label",{className:"pb-2"},"Event End Date ",r().createElement("span",{className:"text-red-500"},"*")),r().createElement("input",{type:"date",name:"price",id:"start-date",value:P?P.toISOString().slice(0,10):"",className:"mt-2 appearance-none block w-full px-3 h-[35px] border border-gray-300 rounded-[3px] placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:e=>{const t=new Date(e.target.value);A(t)},min:O,placeholder:"Enter your event product stock..."})),r().createElement("br",null),r().createElement("div",null,r().createElement("label",{className:"pb-2"},"Upload Image ",r().createElement("span",{className:"text-red-500"},"*")),r().createElement("input",{type:"file",name:"",id:"upload",className:"hidden",onChange:e=>{const t=Array.from(e.target.files);f([]),t.forEach((e=>{const t=new FileReader;t.onload=()=>{2===t.readyState&&f((e=>[...e,t.result]))},t.readAsDataURL(e)}))}}),r().createElement("div",{className:"w-full flex items-center flex-wrap"},r().createElement("label",{htmlFor:"upload"},r().createElement(i.Sks,{size:30,className:"mt-3",color:"#555"})),h&&h.map((e=>r().createElement("img",{src:null!=e&&e.url?null==e?void 0:e.url:e,key:e,alt:"",className:"h-[120px] w-[120px] object-cover m-2"})))),r().createElement("br",null),r().createElement("div",{className:"flex justify-between draft-create-btn"},r().createElement("input",{type:"submit",value:"Publish",className:"rounded px-4 bg-green-500 py-2 text-white"}),r().createElement("button",{onClick:async t=>{t.preventDefault();const a=new FormData;h.forEach((e=>{a.append("images",e)}));const l={draft:!0,name:y,description:N,productArray:U,images:h,shopId:e._id,start_Date:null==k?void 0:k.toISOString(),Finish_Date:null==P?void 0:P.toISOString()};try{await u.c.post("".concat(p.Yb,"/event/save-draft-event"),{data:l,id:b}),d.cp.success("Event Drafted Successfully")}catch(e){d.cp.error(e.response.data.message)}},className:"rounded px-4 py-2"},"Save As Draft")))),r().createElement("br",null),M&&r().createElement(E.c,{data:j,productArray:U,setProductArray:z,styles:g,activeError:D})))};var g=a(93736);const h=()=>r().createElement("div",null,r().createElement(n.c,null),r().createElement("div",{className:"flex  justify-between w-full"},r().createElement("div",{className:"800px:w-[330px] dashboard-side-bar-res"},r().createElement(c.c,{active:6})),r().createElement("div",{className:"w-full justify-center flex"},r().createElement(b,null))),r().createElement(g.c,null))},36684:(e,t,a)=>{a.d(t,{c:()=>u});var l=a(11504),r=a.n(l),n=a(38120),c=a(1784),s=a(13368);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},o.apply(this,arguments)}const u=e=>{var t,a;return r().createElement("div",null,r().createElement("div",o({},e,{size:"lg",centered:!0,className:"h-fit"}),r().createElement("div",{className:"flex gap-3"},r().createElement("div",{className:"w-[40%] ml-[15px] p-[10px] rounded-xl sp1 h-[500px] overflow-auto"},r().createElement("div",{className:"bg-white h-[60px] sticky top-0"},r().createElement("div",{className:" border-b-2 flex justify-between px-3 rounded-xl font-semibold h-[30px]",style:{backgroundColor:null==e||null===(t=e.styles)||void 0===t?void 0:t.mainColor,color:null==e||null===(a=e.styles)||void 0===a?void 0:a.fontColor}},r().createElement("p",{className:"pt-0.5"},"Name"),r().createElement("p",{className:"pt-0.5 pr-3"},"Add"))),r().createElement("div",{className:"p-[10px] w-full "},e.data.map(((t,a)=>{var l,n;return r().createElement("div",{className:"flex justify-between my-2"},r().createElement("p",{className:"w-[80%]"},t.name,"(",t.productId,")"),r().createElement("div",null,r().createElement("button",{className:"rounded py-1 px-3",onClick:a=>{((t,a)=>{t.preventDefault();const l=[...e.productArray];l.includes(a)||(a.showInputs,l.push(a)),e.setProductArray(l)})(a,t)},style:{backgroundColor:null==e||null===(l=e.styles)||void 0===l?void 0:l.mainColor,color:null==e||null===(n=e.styles)||void 0===n?void 0:n.fontColor}},"Add")))})))),r().createElement("div",{className:"added-prod"},e.productArray.length>0&&r().createElement(n.c,{className:"accordion"},e.productArray.map(((t,a)=>{var l;return r().createElement("div",{className:"sp2 mb-2"},r().createElement(n.c.Item,{eventKey:a},r().createElement(n.c.Header,null,t.name.length>40?t.name.slice(0,40)+"...":t.name,"   ",(null==e||null===(l=e.activeError)||void 0===l?void 0:l.includes(a))&&r().createElement(s.mU.Provider,{value:{color:"red"}},r().createElement(c.awH,{size:20,color:"red"})),r().createElement("button",{className:"absolute right-[50px] bg-red-500 text-white py-1 px-3 rounded",onClick:t=>{((t,a)=>{t.preventDefault();const l=[...e.productArray];l.splice(a,1),e.setProductArray(l)})(t,a)}},"Remove")),r().createElement(n.c.Body,null,r().createElement("p",null,"Name : ",t.name),t.showInputs?t.colorInputs.map(((t,l)=>r().createElement(r().Fragment,null,r().createElement("p",null,t.imageColor,"(Varient Name) :"),r().createElement("p",null,"        Original Price :"," ",t.originalPrice),r().createElement("div",{className:"d-flex"},r().createElement("p",null,"        Discount Price :"," ",t.discountPrice),r().createElement("input",{className:"event-input",type:"tel",placeholder:"Event Price",value:t.eventPrice,onChange:t=>{((t,a,l)=>{t.preventDefault();const r=[...e.productArray],n=+r[a].colorInputs[l].originalPrice,c=+t.target.value;c<n?(r[a].colorInputs[l].eventPrice=c,e.setProductArray(r)):alert("Event Price can't be More than Original Price")})(t,a,l)},required:!0}),r().createElement("span",{className:"text-red-500  ml-2"},"*")),t.haveAttributes&&t.attributeStock?r().createElement(r().Fragment,null,r().createElement("p",null,"    Attribute Name : ",t.attributes[0].name),t.attributes[0].values.map(((t,n)=>r().createElement("div",{className:"d-flex"},"        ",r().createElement("p",null,t.valName," : ",t.stock),r().createElement("input",{className:"event-input w-25",type:"tel",placeholder:"Event Stock",value:t.eventStock,onChange:t=>{((t,a,l,r)=>{t.preventDefault();const n=[...e.productArray],c=n[a].colorInputs[l].attributes[0].values[r].stock,s=t.target.value;s<=c?(n[a].colorInputs[l].attributes[0].values[r].eventStock=s,e.setProductArray(n)):alert("Event Stock can't be More than Existing Stock")})(t,a,l,n)},required:!0}),r().createElement("span",{className:"text-red-500  ml-2"},"*"))))):r().createElement("div",{className:"d-flex"},r().createElement("p",null,"        Stock : ",t.stock),r().createElement("input",{className:"event-input w-25",placeholder:"Event Stock",type:"tel",value:t.eventStock,onChange:t=>{((t,a,l)=>{t.preventDefault();const r=[...e.productArray],n=+t.target.value;n<=+r[a].colorInputs[l].stock?(r[a].colorInputs[l].eventStock=n,e.setProductArray(r)):alert("Event Stock can't be More than Existing Stock")})(t,a,l)},required:!0}),r().createElement("span",{className:"text-red-500  ml-2"},"*"))))):r().createElement(r().Fragment,null,r().createElement("p",null,"Original Price : ",t.originalPrice),r().createElement("div",{className:"d-flex"},r().createElement("p",null,"Discount price : ",t.discountPrice),r().createElement("input",{className:"event-input",type:"tel",value:t.eventPrice,placeholder:"Event Price",onChange:t=>{((t,a)=>{t.preventDefault();const l=[...e.productArray];+t.target.value>+l[a].originalPrice?alert("Event Price can't be More than Original Price"):(l[a].eventPrice=t.target.value,e.setProductArray(l))})(t,a)}}),r().createElement("span",{className:"text-red-500  ml-2"},"*")),t.haveAttributes&&t.attributeStock?r().createElement(r().Fragment,null,r().createElement("p",null,"Attribute Name : ",t.attributes[0].name),t.attributes[0].values.map(((t,l)=>r().createElement("div",{className:"d-flex"},"        ",r().createElement("p",null,t.valName," : ",t.stock),r().createElement("input",{className:"event-input w-25",type:"tel",placeholder:"Event Stock",value:t.eventStock,onChange:t=>{((t,a,l)=>{t.preventDefault();const r=[...e.productArray],n=r[a].attributes[0].values[l].stock,c=+t.target.value;c<=n?(r[a].attributes[0].values[l].eventStock=c,e.setProductArray(r)):alert("Event Stock can't be More than Existing Stock")})(t,a,l)},required:!0}),r().createElement("span",{className:"text-red-500  ml-2"},"*"))))):r().createElement("div",{className:"d-flex"},r().createElement("p",null,"    Stock : ",t.stock),r().createElement("input",{className:"event-input w-25",placeholder:"Event Stock",type:"tel",value:t.eventStock,onChange:t=>{((t,a)=>{t.preventDefault();const l=[...e.productArray];+t.target.value>+l[a].stock?alert("Event Stock can't be More than Existing Stock"):(l[a].eventStock=t.target.value,e.setProductArray(l))})(t,a)},required:!0}),r().createElement("span",{className:"text-red-500  ml-2"},"*"))))))}))))),r().createElement("br",null)))}}}]);