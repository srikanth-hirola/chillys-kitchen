"use strict";(self.webpackChunkecom=self.webpackChunkecom||[]).push([[6336],{26336:(e,t,l)=>{l.r(t),l.d(t,{default:()=>E});var n=l(11504),a=l.n(n),s=l(27768),r=l(53300),c=l(83284),d=l(96800),i=l(66564),m=l(91864),o=l(85704),u=l(89340),p=l(85976),h=l(38467);const v=()=>{var e,t,l,s,v,g,E,x,f,b,N,w,y,S,C;const{ConvertCurrency:A}=(0,h.c)(),{orders:O}=(0,d.w1)((e=>e.order)),{seller:P}=(0,d.w1)((e=>e.seller)),D=(0,d.OY)(),[I,k]=(0,n.useState)(""),R=(0,c.i6)(),_=(0,p.U)(),[F,B]=(0,n.useState)(),[U,Y]=(0,n.useState)(),[j,q]=(0,n.useState)({length:null,breadth:null,height:null,weight:null}),T=e=>{const{name:t,value:l}=e.target;q({...j,[t]:l})},{id:z}=(0,c.W4)();(0,n.useEffect)((()=>{D((0,m.At)(P._id))}),[D]);const[K,L]=(0,n.useState)(),W=O&&O.find((e=>e._id===z));(0,n.useEffect)((()=>{const e=W&&W.sellerCart.find((e=>e.sellerID===P._id));L(e)}),[W,P._id]),(0,n.useEffect)((()=>{var e;q({length:null==K?void 0:K.length,breadth:null==K?void 0:K.breadth,height:null==K?void 0:K.height,weight:null==K?void 0:K.weight}),null!=K&&null!==(e=K.shippingOrderDetails)&&void 0!==e&&e.order_id&&(B(null==K?void 0:K.shippingOrderDetails.order_id),Y(null==K?void 0:K.shippingOrderDetails.shipment_id))}),[K]);const H=async(e,t)=>{await i.c.put("".concat(o.Yb,"/order/order-refund-success/").concat(z),{status:I,productID:t},{withCredentials:!0}).then((e=>{u.cp.success("Order updated!"),D((0,m.At)(P._id))})).catch((e=>{u.cp.error(e.response.data.message)}))};return a().createElement("div",{className:"py-4 min-h-screen ".concat(_.section)},a().createElement("div",{className:"w-full flex items-center justify-between"},a().createElement("div",{className:"flex items-center"},a().createElement(r.aE2,{size:30,color:"#0156FF"}),a().createElement("h1",{className:"pl-2 text-[24px] mt-3"},"Order Details")),a().createElement("div",{className:"".concat(_.button," !bg-[#fce1e6] !rounded-[4px] text-[#fff] font-[600] !h-[45px] text-[18px]"),onClick:()=>{R(-1)}},"Order List")),a().createElement("div",{className:"w-full flex items-center justify-between pt-6"},a().createElement("h5",{className:"text-[#00000084] m-0 text-[15px]"},"Order ID: ",a().createElement("span",null,"#",null==W||null===(e=W._id)||void 0===e?void 0:e.slice(0,8))),a().createElement("h5",{className:"text-[#00000084] m-0 text-[15px]"},"Placed on: ",a().createElement("span",null,null==W||null===(t=W.createdAt)||void 0===t?void 0:t.slice(0,10)))),a().createElement("br",null),a().createElement("br",null),W&&(null==W?void 0:W.cart.map(((e,t)=>{var l,n,s,r,c,d;return a().createElement("div",{className:"w-full flex items-start mb-5"},a().createElement("img",{src:"".concat(e.showInputs?null===(l=e.selectedColor.image)||void 0===l?void 0:l.url:null===(n=e.selectedColor.mainImage)||void 0===n?void 0:n.url),alt:"",className:"w-[80x] h-[80px]"}),a().createElement("div",{className:"w-full"},a().createElement("h5",{className:"pl-3 text-[20px] fw-medium"},e.name),a().createElement("h5",{className:"pl-3 text-[18px] fw-light"},"SKU : ",e.selectedColor.SKU),a().createElement("h5",{className:"pl-3 text-[18px] text-[#00000091] fw-normal"},null==_||null===(s=_.currency)||void 0===s?void 0:s.Symbol," ",A(e.finalPrice)," x ",e.qty),(null==e||null===(r=e.selectedColor)||void 0===r?void 0:r.haveAttributes)&&a().createElement("p",{className:"pl-3 text-[18px] text-[#00000091]"},null===(c=e.colorAttribute)||void 0===c?void 0:c.name," :"," ",null===(d=e.colorAttribute)||void 0===d?void 0:d.value.valName),"Processing refund"===e.status||"Refund Success"===e.status||"Rejected refund"===e.status?a().createElement(a().Fragment,null,a().createElement("select",{value:I,onChange:e=>k(e.target.value),className:"w-[200px] mt-2 border h-[35px] rounded-[5px]"},["Processing refund","Rejected refund","Refund Success"].slice(["Processing refund","Rejected refund","Refund Success"].indexOf(e.status)).map(((e,t)=>a().createElement("option",{value:e,key:t},e)))),"Processing refund"===e.status&&a().createElement("div",{className:"".concat(_.button," mt-5 !bg-[#FCE1E6] !rounded-[4px] text-[#fff] font-[600] !h-[45px] text-[18px]"),onClick:t=>{H(0,e._id)}},"Update Status")):null))}))),a().createElement("div",{className:"border-t w-full text-right flex justify-between"},a().createElement("h5",{className:"pt-3 text-[18px]"},a().createElement("strong",{className:"fw-medium"},"Shipping: "),a().createElement("span",{className:"fw-light"},null==_||null===(l=_.currency)||void 0===l?void 0:l.Symbol," ",A(null==K||null===(s=K.response)||void 0===s||null===(s=s.orders)||void 0===s?void 0:s.rate))),a().createElement("h5",{className:"pt-3 text-[18px]"},a().createElement("strong",{className:"fw-medium"},"Total Price: "),a().createElement("span",{className:"fw-light"},null==_||null===(v=_.currency)||void 0===v?void 0:v.Symbol," ",A((null==K?void 0:K.subTotalPrice)+(null==K||null===(g=K.response)||void 0===g||null===(g=g.orders)||void 0===g?void 0:g.rate)))),a().createElement("h5",{className:"pt-3 text-[18px]"},a().createElement("strong",{className:"fw-medium"},null==W||null===(E=W.paymentInfo)||void 0===E?void 0:E.type))),a().createElement("div",{className:"border-t w-full"},a().createElement("h5",{className:"pt-3 text-[17px] fw-medium mb-1"},"Delivery Info:"),a().createElement("div",{className:"pt-1 text-[17px] fw-light"},a().createElement("p",{className:"mb-1"},a().createElement("strong",{className:"fw-medium "},"Courier Name:")," ",null==K||null===(x=K.response)||void 0===x||null===(x=x.orders)||void 0===x?void 0:x.courier_name),a().createElement("p",{className:"mb-1"},a().createElement("strong",{className:"fw-medium"},"Estimated Delivery: "),null==K||null===(f=K.response)||void 0===f||null===(f=f.orders)||void 0===f?void 0:f.etd))),a().createElement("br",null),a().createElement("br",null),a().createElement("div",{className:"w-full 800px:flex items-center"},null!=W&&W.shipping_is_billing?a().createElement("div",{className:"w-full 800px:w-[60%]"},a().createElement("h4",{className:"pt-3 text-[18px] font-[600] mb-2"},"Shipping Address:"),a().createElement("p",{className:"pt-3 text-[18px] font-[300] mb-2"},null==W?void 0:W.BillingAddress.billingaddress1),a().createElement("p",{className:" text-[18px] font-[300] mb-2"},null==W?void 0:W.BillingAddress.billingaddress2),a().createElement("p",{className:" text-[18px] font-[300] mb-2"},null==W?void 0:W.BillingAddress.newCountry),a().createElement("p",{className:" text-[18px] font-[300] mb-2"},null==W?void 0:W.BillingAddress.newState),a().createElement("p",{className:" text-[18px] font-[300] mb-2"},null==W?void 0:W.BillingAddress.newCity," - ",null==W?void 0:W.BillingAddress.billingzipCode),a().createElement("p",{className:" text-[18px] font-[300] mb-2"},null==W||null===(b=W.BillingAddress)||void 0===b?void 0:b.billinguserphonenumber),a().createElement("p",{className:" text-[18px] font-[300] mb-2"},null==W||null===(N=W.BillingAddress)||void 0===N?void 0:N.billinguserEmail)):a().createElement("div",{className:"w-full 800px:w-[60%]"},a().createElement("h4",{className:"pt-3 text-[20px] font-[600]"},"Shipping Address:"),a().createElement("h4",{className:"pt-3 text-[20px]"},null==W?void 0:W.shippingAddress.shippingaddress1),a().createElement("h4",{className:" text-[20px]"},null==W?void 0:W.shippingAddress.shippingaddress2),a().createElement("h4",{className:" text-[20px]"},null==W?void 0:W.shippingAddress.newCountryshipping),a().createElement("h4",{className:" text-[20px]"},null==W?void 0:W.shippingAddress.newStateshipping),a().createElement("h4",{className:" text-[20px]"},null==W?void 0:W.shippingAddress.newCityshipping," - ",null==W?void 0:W.BillingAddress.shippingzipCode),a().createElement("h4",{className:" text-[20px]"},null==W||null===(w=W.shippingAddress)||void 0===w?void 0:w.shippinguserphonenumber),a().createElement("h4",{className:" text-[20px]"},null==W||null===(y=W.shippingAddress)||void 0===y?void 0:y.shippinguserEmail)),a().createElement("div",{className:"w-full 800px:w-[40%]"},a().createElement("h4",{className:"pt-3 text-[18px] font-[600]"},"Payment Info:"),a().createElement("p",{className:"text-[18px] font-[300] mb-2"},"Status:"," ",null!=W&&null!==(S=W.paymentInfo)&&void 0!==S&&S.status?null==W||null===(C=W.paymentInfo)||void 0===C?void 0:C.status:"Not Paid"))),a().createElement("br",null),a().createElement("br",null),!F&&a().createElement(a().Fragment,null,a().createElement("div",{className:"my-4 flex space-x-3"},a().createElement("div",null,a().createElement("label",{className:"pb-1 font-[500]"},"Package Length In Centemeter",a().createElement("span",{className:"text-red-500"},"*")),a().createElement("br",null),a().createElement("input",{type:"number",className:"border-1 border-grey rounded p-1 w-60",name:"length",value:j.length,readOnly:!0,onChange:T})),a().createElement("div",null,a().createElement("label",{className:"pb-1 font-[500]"},"Package Breadth In Centemeter",a().createElement("span",{className:"text-red-500"},"*")),a().createElement("br",null),a().createElement("input",{type:"number",className:"border-1 border-grey rounded p-1 w-60",name:"breadth",value:j.breadth,readOnly:!0,onChange:T})),a().createElement("div",null,a().createElement("label",{className:"pb-1 font-[500]"},"Package Height In Centemeter",a().createElement("span",{className:"text-red-500"},"*")),a().createElement("br",null),a().createElement("input",{type:"number",className:"border-1 border-grey rounded p-1 w-60",name:"height",value:j.height,readOnly:!0,onChange:T})),a().createElement("div",null,a().createElement("label",{className:"pb-1 font-[500]"},"Package Weight In Kilograms",a().createElement("span",{className:"text-red-500"},"*")),a().createElement("br",null),a().createElement("input",{type:"number",className:"border-1 border-grey rounded p-1 w-60",name:"weight",readOnly:!0,onChange:T,value:j.weight}))),a().createElement("div",null,a().createElement("button",{class:"bg-green-500 text-white p-2 rounded",onClick:async e=>{e.preventDefault(),null===j.length||null===j.breadth||null===j.height||null===j.weight?u.cp.error("All Fields of Package Dimenison is Required!"):await i.c.post("".concat(o.Yb,"/shipping/creat-shipment-order"),{data:W,packageDimension:j,shippingDataSeller:K}).then((e=>{"Success"===e.data.Status?(u.cp.success("Shipment Order Created Successfully"),D((0,m.At)(P._id))):u.cp.error("Shipment Order Failed to create")})).catch((e=>{console.log(e)}))}},"Create Shipment Order"))),F&&a().createElement("div",null,a().createElement("h5",null,"Shipment Order Created"),a().createElement("p",null,"ID : ",a().createElement("span",null,F)),a().createElement("p",null,"Shipment ID : ",a().createElement("span",null,U))),a().createElement("h4",{className:"pt-3 text-[20px] font-[600]"},"Order Status:"),"Processing refund"!==(null==W?void 0:W.status)&&"Refund Success"!==(null==W?void 0:W.status)&&a().createElement("select",{value:I,onChange:e=>k(e.target.value),className:"w-[200px]  border h-[35px] rounded-[5px]"},["Processing","Transferred to delivery partner","Shipping","Received","On the way","Delivered"].slice(["Processing","Transferred to delivery partner","Shipping","Received","On the way","Delivered"].indexOf(null==W?void 0:W.status)).map(((e,t)=>a().createElement("option",{value:e,key:t},e)))),a().createElement("div",{className:"".concat(_.button," mt-5 !bg-[#FCE1E6] !rounded-[4px] text-[#fff] font-[600] !h-[45px] text-[16px] "),onClick:"Processing refund"!==(null==W?void 0:W.status)?async e=>{const t=null==K?void 0:K.products;await i.c.put("".concat(o.Yb,"/order/update-order-status/").concat(z),{status:I,products:t},{withCredentials:!0}).then((e=>{u.cp.success("Order updated!"),R("/shop/dashboard-orders")})).catch((e=>{u.cp.error(e.response.data.message)}))}:H},"Update Status"))};var g=l(93736);const E=()=>a().createElement("div",null,a().createElement(s.c,null),a().createElement(v,null),a().createElement(g.c,null))},38467:(e,t,l)=>{l.d(t,{c:()=>a});var n=l(85976);const a=()=>{const e=(0,n.U)(),t=null==e?void 0:e.currency;return{ConvertCurrency:e=>"INR"!==(null==t?void 0:t.code)?(e*(null==t?void 0:t.exchangeRate)).toFixed(2):e}}},91864:(e,t,l)=>{l.d(t,{At:()=>r,Ym:()=>s});var n=l(66564),a=l(85704);const s=e=>async t=>{try{t({type:"getAllOrdersUserRequest"});const{data:l}=await n.c.get("".concat(a.Yb,"/order/get-all-orders/").concat(e));t({type:"getAllOrdersUserSuccess",payload:l.orders})}catch(e){t({type:"getAllOrdersUserFailed",payload:e.response.data.message})}},r=e=>async t=>{try{t({type:"getAllOrdersShopRequest"});const{data:l}=await n.c.get("".concat(a.Yb,"/order/get-seller-all-orders/").concat(e));t({type:"getAllOrdersShopSuccess",payload:l.orders})}catch(e){t({type:"getAllOrdersShopFailed",payload:e.response.data.message})}}}}]);