"use strict";(self.webpackChunkecom=self.webpackChunkecom||[]).push([[8456],{68456:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var l=a(11504),n=a.n(l),r=a(27768),c=a(53740),o=a(96800),s=a(66564),m=a(94064),u=a(85976),d=a(77980),i=a(89340),g=a(85704),b=a(60580),p=a(58184),E=a(32602);function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},y.apply(this,arguments)}const v=e=>n().createElement(E.c,y({},e,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),n().createElement(E.c.Header,{closeButton:!0},n().createElement(E.c.Title,{id:"contained-modal-title-vcenter"},"Confirm Delete Category")),n().createElement(E.c.Body,null,n().createElement("p",null,"The Category and the products related to this category will also be deleted."),n().createElement("p",null,"Click Confirm Delete to delete the category!"),n().createElement("div",{className:"flex justify-between my-3"},n().createElement("button",{className:"bg-red-400 text-white px-3 py-2 rounded",onClick:async t=>{t.preventDefault();try{const t=null==e?void 0:e.catId;await s.c.delete("".concat(g.Yb,"/category/delete-category/").concat(t)),i.cp.success("Deleted Category and related products Successfully"),setTimeout((()=>{window.location.reload()}),1e3)}catch(e){i.cp.error(e.response.data.message)}}},"Confirm Delete"),n().createElement("button",{className:"bg-blue-400 text-white px-3 py-2 rounded",onClick:e.onHide},"Cancel")))),C=()=>{const e=(0,o.OY)(),t=(0,u.U)(),{category:a,isLoading:r}=(0,o.w1)((e=>e.category)),[c,E]=(0,l.useState)(null),[y,C]=(0,l.useState)([]),[f,N]=(0,l.useState)(!1),[h,x]=(0,l.useState)(!1),[S,w]=(0,l.useState)();(0,l.useEffect)((()=>{e((0,d.Y)())}),[e]),(0,l.useEffect)((()=>{E(a)}),[a]);const[k,D]=(0,l.useState)([]),[I,j]=(0,l.useState)(!1);return n().createElement(n().Fragment,null,r?n().createElement(b.c,null):n().createElement(n().Fragment,null,c&&n().createElement("div",{className:"w-full mx-8 pt-1 mt-10 bg-white outer1-div"},n().createElement("div",{className:"addCat"},f&&n().createElement("div",null,k.map(((e,a)=>n().createElement("div",{key:a},n().createElement("div",{className:"mb-6"},n().createElement("label",{className:"pb-2"},"Category Image",n().createElement("span",{className:"text-red-500"},"*")),n().createElement("br",null),n().createElement("input",{type:"file",className:"border-0",onChange:e=>{((e,t)=>{const a=e.target.files[0];if(a){const e=new FileReader;e.onloadend=()=>{const a=e.result;D((e=>{const l=[...e];return l[t].CatImg=a,l}))},e.readAsDataURL(a)}})(e,a)}}),(null==e?void 0:e.CatImg)&&n().createElement("div",{className:"border-1 rounded w-[150px] h-[100px] my-2"},n().createElement("img",{src:null==e?void 0:e.CatImg,alt:"Category",className:"w-full h-full"}))),n().createElement("div",{className:"categoryInput"},n().createElement("input",{className:"subp",type:"text",placeholder:"Enter category name",value:e.name,onChange:e=>((e,t)=>{const a=[...k];a[e].name=t,D(a)})(a,e.target.value)}),n().createElement("button",{className:"rounded px-4 py-2",style:{backgroundColor:null==t?void 0:t.mainColor,color:null==t?void 0:t.fontColor},onClick:()=>(e=>{const t=[...k];t[e].subcategories.push({name:"",subSubcategories:[{name:""}]}),D(t)})(a)},"Add Subcategory")),n().createElement("div",{className:"categorySub"},e.subcategories.map(((e,l)=>n().createElement("div",{key:l},n().createElement("div",{className:"categoryInput"},n().createElement("input",{className:"subp",type:"text",placeholder:"Enter subcategory name",value:e.name,onChange:e=>((e,t,a)=>{const l=[...k];l[e].subcategories[t].name=a,D(l)})(a,l,e.target.value)}),n().createElement("button",{className:"rounded px-4 py-2",style:{backgroundColor:null==t?void 0:t.mainColor,color:null==t?void 0:t.fontColor},onClick:()=>((e,t)=>{const a=[...k];a[e].subcategories[t].subSubcategories.push({name:""}),D(a)})(a,l)},"Add Sub Subcategory")),e.subSubcategories.map(((e,t)=>n().createElement("div",{key:t},n().createElement("input",{className:"subp p2",type:"text",placeholder:"Enter sub subcategory name",value:null==e?void 0:e.name,onChange:e=>((e,t,a,l)=>{const n=[...k];n[e].subcategories[t].subSubcategories[a]={name:l},D(n)})(a,l,t,e.target.value)}))))))))))),n().createElement("button",{onClick:async e=>{e.preventDefault(),k[0].CatImg&&k[0].name?await s.c.post("".concat(g.Yb,"/category/add-category"),{categories:k}).then((e=>{"Success"===e.data.Status&&i.cp.success("New Category added successfully")})).catch((e=>{i.cp.error(e.response.data.message)})):i.cp.error("Category Image and Name is required")},className:"rounded px-4 bg-green-500 py-2 text-white"},"Submit")),h&&n().createElement(p.c,{categoriesData:c}),n().createElement("div",{className:"flex justify-between my-3"},!f&&n().createElement("button",{onClick:()=>{x(!1),N(!0),D([...k,{approved:!0,name:"",subcategories:[],CatImg:""}])},className:"rounded px-4 py-2",style:{backgroundColor:null==t?void 0:t.mainColor,color:null==t?void 0:t.fontColor}},"Add Category"),!h&&n().createElement("button",{className:"rounded px-4 py-2",style:{backgroundColor:null==t?void 0:t.mainColor,color:null==t?void 0:t.fontColor},onClick:()=>{N(!1),x(!0),D([])}},"Customize Existing Category"))),n().createElement("div",{className:"flex justify-between"},n().createElement("div",{className:"displayCat flex flex-col w-[78%] "},n().createElement("div",{className:"rounded flex justify-between px-4 py-2 ",style:{backgroundColor:null==t?void 0:t.mainColor,color:null==t?void 0:t.fontColor}},n().createElement("span",{className:" font-semibold"},"SL NO"),n().createElement("span",{className:" font-semibold"},"Images"),n().createElement("span",{className:" font-semibold"},"Categories"),n().createElement("span",{className:" font-semibold"},"Subcategories"),n().createElement("span",{className:" font-semibold"},"Delete")),n().createElement("div",{className:"table1-container shadow-md max-h-[700px] overflow-y-scroll w-full"},n().createElement("div",{className:"table1-div w-full"},n().createElement("table",{className:"table1"},n().createElement("tbody",null,c.map(((e,t)=>{var a;return n().createElement("tr",null,n().createElement("td",null,n().createElement("span",null,t+1)),n().createElement("td",{className:" flex justify-center"},(null==e?void 0:e.CatImg)&&n().createElement("img",{src:null==e||null===(a=e.CatImg)||void 0===a?void 0:a.url,alt:"Category-img",className:"w-[100px] h-[50px]"})),n().createElement("td",null,n().createElement("span",null,e.name)),n().createElement("td",null,n().createElement("span",null,n().createElement(m.c.Select,{"aria-label":"Default select example",onChange:e=>{((e,t)=>{C(c[t].subcategories[e.target.value].subSubcategories)})(e,t)}},n().createElement("option",{selected:!0,disabled:!0},"Select Sub Category"),e.subcategories.map(((e,t)=>n().createElement("option",{value:t},e.name)))))),n().createElement("td",null,n().createElement("button",{className:"bg-gray-200 rounded p-1 px-2",onClick:t=>{((e,t)=>{e.preventDefault(),j(!0),w(t)})(t,e._id)}},n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",id:"delete",width:30,height:30},n().createElement("path",{d:"M24.2,12.193,23.8,24.3a3.988,3.988,0,0,1-4,3.857H12.2a3.988,3.988,0,0,1-4-3.853L7.8,12.193a1,1,0,0,1,2-.066l.4,12.11a2,2,0,0,0,2,1.923h7.6a2,2,0,0,0,2-1.927l.4-12.106a1,1,0,0,1,2,.066Zm1.323-4.029a1,1,0,0,1-1,1H7.478a1,1,0,0,1,0-2h3.1a1.276,1.276,0,0,0,1.273-1.148,\r 2.991,2.991,0,0,1,2.984-2.694h2.33a2.991,2.991,0,0,1,2.984,2.694,1.276,1.276,0,0,0,1.273,1.148h3.1A1,1,0,0,1,25.522,8.164Zm-11.936-1h4.828a3.3,3.3,0,0,1-.255-.944,1,1,0,0,0-.994-.9h-2.33a1,1,0,0,0-.994.9A3.3,3.3,0,0,1,13.586,7.164Zm1.007,15.151V13.8a1,1,0,0,0-2,0v8.519a1,1,0,0,0,2,0Zm4.814,0V13.8a1,1,0,0,0-2,0v8.519a1,1,0,0,0,2,0Z"})))))})))),n().createElement(v,{show:I,onHide:()=>j(!1),catId:S})))),n().createElement("div",{className:"w-[20%] flex flex-col "},n().createElement("div",{className:"rounded flex justify-between px-4 py-2 text-center mb-2",style:{backgroundColor:null==t?void 0:t.mainColor,color:null==t?void 0:t.fontColor}},n().createElement("span",{className:" font-semibold"},"Sub SubCategories")),n().createElement("div",{className:"subSub w-full shadow-md"},y.map((e=>n().createElement("p",{className:"subp"},null==e?void 0:e.name)))))))))};var f=a(93736);const N=()=>n().createElement("div",null,n().createElement(r.c,null),n().createElement("div",{className:"flex items-start justify-between w-full dasboard-user-width-mobile"},n().createElement("div",{className:"800px:w-[330px] dashboard-side-bar-res"},n().createElement(c.c,{active:38})),n().createElement("div",{className:"w-full justify-center flex dashboard-side-bar-data-view"},n().createElement(C,null))),n().createElement(f.c,null))},58184:(e,t,a)=>{a.d(t,{c:()=>i});var l=a(66564),n=a(11504),r=a.n(n),c=a(94064),o=a(85976),s=a(85704),m=a(89340),u=a(76542),d=a(15896);const i=e=>{let{categoriesData:t}=e;const a=(0,o.U)(),[i,g]=(0,n.useState)([]),[b,p]=(0,n.useState)(""),[E,y]=(0,n.useState)(),[v,C]=(0,n.useState)(),f=t,[N,h]=(0,n.useState)(!1);return r().createElement("div",null,r().createElement("div",null,r().createElement("div",{className:"categoryInput mb-4"},r().createElement(c.c.Select,{"aria-label":"Default select example",onChange:e=>{(e=>{e.preventDefault(),p(e.target.value),C(e.target.value),t.map((t=>{t.name===e.target.value&&(g(t.subcategories),y(null==t?void 0:t.CatImg))}))})(e)}},r().createElement("option",{selected:!0,disabled:!0},"Select Category"),f.map(((e,t)=>r().createElement("option",{value:e.name},e.name)))),b&&r().createElement(r().Fragment,null,r().createElement("div",{className:"mb-6 mt-4"},r().createElement("label",{className:"pb-2"},"Category Image",r().createElement("span",{className:"text-red-500"},"*")),r().createElement("br",null),r().createElement("input",{type:"file",className:"border-0",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onloadend=()=>{const t=e.result;y(t)},e.readAsDataURL(t)}}}),E&&r().createElement("div",{className:"border-1 rounded w-[150px] my-2"},r().createElement("img",{src:null!=E&&E.url?null==E?void 0:E.url:E,alt:"Category",className:"w-full h-[100px]"}))),r().createElement("input",{className:"subp",type:"text",placeholder:"Enter category name",value:v,onChange:e=>C(e.target.value)}),r().createElement("button",{className:"rounded px-4 py-2",style:{backgroundColor:null==a?void 0:a.mainColor,color:null==a?void 0:a.fontColor},onClick:e=>{e.preventDefault(),g([...i,{name:"",subSubcategories:[{name:""}]}])}},"Add Subcategory"))),r().createElement("div",{className:"categorySub"},i.map(((e,t)=>r().createElement("div",{key:t},r().createElement("div",{className:"categoryInput"},r().createElement("div",{className:"flex border-1 rounded px-1  my-1"},r().createElement("input",{type:"text",className:"border-0 ",placeholder:"Enter subcategory name",value:e.name,onChange:e=>((e,t)=>{const a=JSON.parse(JSON.stringify(i));a[e].name=t,g(a)})(t,e.target.value)}),r().createElement("button",{className:"bg-white",onClick:e=>((e,t)=>{e.preventDefault();let a=[...i];a=a.filter(((e,a)=>a!==t)),g(a)})(e,t)},r().createElement(u.u,{icon:d._8k,style:{color:"red"}}))),r().createElement("button",{className:"rounded px-4 py-2",style:{backgroundColor:null==a?void 0:a.mainColor,color:null==a?void 0:a.fontColor},onClick:e=>((e,t)=>{e.preventDefault();const a=JSON.parse(JSON.stringify(i));a[t].subSubcategories.push({name:""}),g(a)})(e,t)},"Add Sub Subcategory")),e.subSubcategories.map(((e,a)=>r().createElement("div",{key:a,className:"flex border-1 rounded py-2 px-2 my-1"},r().createElement("input",{type:"text",className:"border-0 p2",placeholder:"Enter sub subcategory name",value:null==e?void 0:e.name,onChange:e=>((e,t,a)=>{const l=i.map(((l,n)=>{if(n===e){const e=[...l.subSubcategories];return e[t]={name:a},{...l,subSubcategories:e}}return l}));g(l)})(t,a,e.target.value)}),r().createElement("button",{onClick:e=>((e,t,a)=>{e.preventDefault();const l=i.map(((e,l)=>{if(l===t){let t=[...e.subSubcategories];return t=t.filter(((e,t)=>t!==a)),{...e,subSubcategories:t}}return e}));g(l)})(e,t,a)},r().createElement(u.u,{icon:d._8k,style:{color:"red"}}))))))))),b&&r().createElement(r().Fragment,null,N?r().createElement("button",{className:"cat-btn"},"Loading..."):r().createElement("button",{className:"rounded px-4 bg-green-500 py-2 text-white my-2",onClick:async e=>{e.preventDefault(),v&&E?(h(!0),await l.c.put("".concat(s.Yb,"/category/custom-category"),{existingName:b,categoryName:v,subCat:i,CatImg:E}).then((e=>{h(!1),"Success"===e.data.Status&&m.cp.success("Category Customized Successfully")})).catch((e=>{m.cp.error(e.response.data.message)}))):m.cp.error("Category and Category Image is required")}},"Submit"))))}}}]);